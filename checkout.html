<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pemesanan Buku - Checkout</title>
    <link rel="stylesheet" href="css/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">
    <style>
        /* Tambahkan CSS sederhana untuk menyembunyikan invoice awal */
        #invoiceDisplay {
            display: none; /* Sembunyikan div invoice saat load */
        }
        .invoice-card-checkout table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
        }
        .invoice-card-checkout th, .invoice-card-checkout td {
            padding: 10px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        .invoice-total-row th {
            font-size: 1.2rem;
            color: var(--color-primary);
        }
    </style>
</head>
<body>
    <header class="app-header">
        <div class="app-logo">ðŸ“š Sanctuary</div>
        <nav>
            <ul>
                <li><a href="dashboard.html">Dashboard</a></li>
                <li><a href="stok.html">Katalog</a></li>
                <li><a href="tracking.html">Tracking</a></li>
                <li><a href="history.html">History</a></li>
                <li><a href="index.html">Logout</a></li>
            </ul>
        </nav>
    </header>

    <main class="container">
        <h2>Halaman Checkout (Pemesanan)</h2>
        <p>Silakan isi detail pemesanan Anda.</p>
        
        <section class="form-card" id="checkoutFormSection">
            <h3 id="orderGreeting">Halo, [Nama Pengguna]!</h3>
            <form id="checkoutForm">
                
                <div class="form-group">
                    <label for="pemesan">Nama Pemesan (Otomatis)</label>
                    <input type="text" id="pemesan" name="pemesan" readonly required>
                </div>
                
                <div class="form-group">
                    <label for="bukuPesan">Pilih Buku yang Dipesan</label>
                    <select id="bukuPesan" required>
                        <option value="">-- Pilih Buku --</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="jumlah">Jumlah Pesan</label>
                    <input type="number" id="jumlah" name="jumlah" min="1" value="1" required>
                    <small id="stokInfo" style="display: block; margin-top: 5px; color: #777;">Stok tersedia: -</small>
                </div>

                <div class="form-group">
                    <label for="totalBayar">Total Pembayaran</label>
                    <input type="text" id="totalBayar" name="totalBayar" value="Rp 0" readonly required>
                </div>
                
                <div class="form-actions">
                    <button type="submit" class="btn primary-btn" id="btnPesan">Konfirmasi Pemesanan</button>
                </div>
            </form>
        </section>

        <section class="form-card invoice-card-checkout" id="invoiceDisplay">
            <h3>âœ… Pemesanan Berhasil! (Invoice)</h3>
            <p>Berikut adalah detail pesanan Anda. Silakan lanjutkan ke pembayaran.</p>
            
            <table>
                <thead>
                    <tr>
                        <th colspan="2">Detail Transaksi</th>
                    </tr>
                </thead>
                <tbody>
                    <tr><th>Nomor Faktur</th><td id="invNumber"></td></tr>
                    <tr><th>Tanggal Pemesanan</th><td id="invDate"></td></tr>
                    <tr><th>Nama Pemesan</th><td id="invCustomer"></td></tr>
                    <tr><th>Barang Dipesan</th><td id="invItem"></td></tr>
                    <tr><th>Jumlah Unit</th><td id="invQuantity"></td></tr>
                    <tr><th>Status</th><td id="invStatus" style="font-weight: bold;"></td></tr>
                    <tr class="invoice-total-row"><th>TOTAL AKHIR</th><td id="invTotal" style="font-weight: bold;"></td></tr>
                </tbody>
            </table>

            <div class="payment-info" style="margin-top: 20px; padding: 15px; background: #f9f9f9; border-radius: 4px;">
                <h4>Langkah Selanjutnya:</h4>
                <p>Transfer **<span id="invTotalP"></span>** ke Rekening **BCA 123456789** (a.n UT Books Store).</p>
                <p>Status: **Menunggu Pembayaran** telah tercatat di Riwayat Transaksi Anda.</p>
            </div>

            <div class="form-actions" style="margin-top: 20px;">
                <a href="history.html" class="btn primary-btn">Lihat Riwayat Transaksi</a>
                <button type="button" class="btn secondary-btn" onclick="window.location.reload();">Pesan Lagi</button>
            </div>
        </section>

    </main>
    
    <script src="js/data.js"></script>
    <script src="js/script.js"></script>
</body>
</html>